!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r=(e,t)=>t.some(t=>e instanceof t);let o,a;const i=new WeakMap,c=new WeakMap,u=new WeakMap,s=new WeakMap,l=new WeakMap;let f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return b(e[t])},has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){f=e(f)}function d(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(y(this),t),b(i.get(this))}:function(...t){return b(e.apply(y(this),t))}:function(t,...n){const r=e.call(y(this),t,...n);return u.set(r,t.sort?t.sort():[t]),b(r)}}function h(e){return"function"==typeof e?d(e):(e instanceof IDBTransaction&&function(e){if(c.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{t(),r()},a=()=>{n(e.error),r()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)});c.set(e,t)}(e),r(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,f):e)}function b(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{t(b(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&i.set(t,e)}),l.set(t,e),t}(e);if(s.has(e))return s.get(e);const t=h(e);return t!==e&&(s.set(e,t),l.set(t,e)),t}const y=e=>l.get(e);function v(e,t,{blocked:n,upgrade:r,blocking:o}={}){const a=indexedDB.open(e,t),i=b(a);return r&&a.addEventListener("upgradeneeded",e=>{r(b(a.result),e.oldVersion,e.newVersion,b(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),o&&i.then(e=>e.addEventListener("versionchange",o)),i}const w=["get","getKey","getAll","getAllKeys","count"],g=["put","add","delete","clear"],m=new Map;function k(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(m.get(t))return m.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=g.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!w.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,o?"readwrite":"readonly");let i=a.store;r&&(i=i.index(t.shift()));const c=i[n](...t);return o&&await a.done,c};return m.set(t,a),a}p(e=>({get:(t,n,r)=>k(t,n)||e.get(t,n,r),has:(t,n)=>!!k(t,n)||e.has(t,n)}));const x=["continue","continuePrimaryKey","advance"],S={},I=new WeakMap,L=new WeakMap,D={get(e,t){if(!x.includes(t))return e[t];let n=S[t];return n||(n=S[t]=function(...e){I.set(this,L.get(this)[t](...e))}),n}};async function*B(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,D);for(L.set(n,t),l.set(n,y(t));t;)yield n,t=await(I.get(n)||t.continue()),I.delete(n)}function E(e,t){return t===Symbol.asyncIterator&&r(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&r(e,[IDBIndex,IDBObjectStore])}p(e=>({get:(t,n,r)=>E(t,n)?B:e.get(t,n,r),has:(t,n)=>E(t,n)||e.has(t,n)}));var P,j,M="sw-messages",T="login-store",C="logged-store",O={name:"login",version:4};!function(e){e.isLogged="isLogged",e.account="account"}(P||(P={})),function(e){e.isLogged="isLogged",e.isAccountCreated="isAccountCreated",e.checkLogin="checkLogin",e.checkPassword="checkPassword",e.createAccount="createAccount",e.login="login"}(j||(j={}));var A=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function c(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}u((r=r.apply(e,t||[])).next())})},W=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};var G=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function c(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}u((r=r.apply(e,t||[])).next())})},_=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};var N=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function c(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}u((r=r.apply(e,t||[])).next())})},K=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};var U=self.require("crypto");function q(e){return U.createHash("sha256").update(e).digest("hex")}var V=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function c(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}u((r=r.apply(e,t||[])).next())})},F=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};var H=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function c(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}u((r=r.apply(e,t||[])).next())})},R=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function $(e,t,n){return H(this,void 0,void 0,function(){var r,o,a,i;return R(this,function(c){switch(c.label){case 0:return r=U.randomBytes(16).toString("hex"),o=q(n.password+r),a=Date.now(),i={salt:r,login:n.login,password:o,creationTime:a,lastUpdateTime:a},[4,t.put(T,i,P.account)];case 1:return c.sent(),e.postMessage({type:j.createAccount,data:!0}),[2]}})})}var z=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function c(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}u((r=r.apply(e,t||[])).next())})},J=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};var Q=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function c(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}u((r=r.apply(e,t||[])).next())})},X=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},Y=self,Z=null;function ee(e){e.createObjectStore(T);e.createObjectStore(C).put(!1,P.isLogged)}function te(){return Q(this,void 0,void 0,function(){return X(this,function(e){switch(e.label){case 0:return[4,v(O.name,O.version,{upgrade:ee})];case 1:return[4,(Z=e.sent()).put(C,!1,P.isLogged)];case 2:return e.sent(),[2,null]}})})}function ne(){return Q(this,void 0,void 0,function(){var e;return X(this,function(t){return(e=new BroadcastChannel(M)).addEventListener("message",function(t){var n=t.data,r=n.type,o=n.data;switch(r){case j.isLogged:!function(e,t){A(this,void 0,void 0,function(){var n;return W(this,function(r){switch(r.label){case 0:return[4,t.get(C,P.isLogged)];case 1:return n=r.sent(),e.postMessage({type:j.isLogged,data:n}),[2]}})})}(e,Z);break;case j.isAccountCreated:!function(e,t){G(this,void 0,void 0,function(){var n,r;return _(this,function(o){switch(o.label){case 0:return[4,t.count(T,P.account)];case 1:return n=o.sent(),r=Boolean(n),e.postMessage({type:j.isAccountCreated,data:r}),[2]}})})}(e,Z);break;case j.checkLogin:!function(e,t,n){N(this,void 0,void 0,function(){var r,o;return K(this,function(a){switch(a.label){case 0:return[4,t.get(T,P.account)];case 1:return r=a.sent(),o=n===r.login,e.postMessage({type:j.checkLogin,data:o}),[2]}})})}(e,Z,o);break;case j.checkPassword:!function(e,t,n){V(this,void 0,void 0,function(){var r,o,a;return F(this,function(i){switch(i.label){case 0:return[4,t.get(T,P.account)];case 1:return r=i.sent(),o=q(n+r.salt),a=o===r.password,e.postMessage({type:j.checkPassword,data:a}),[2]}})})}(e,Z,o);break;case j.createAccount:$(e,Z,o);break;case j.login:!function(e,t){z(this,void 0,void 0,function(){return J(this,function(n){switch(n.label){case 0:return[4,t.put(C,!0,P.isLogged)];case 1:return n.sent(),e.postMessage({type:j.login,data:!0}),[2]}})})}(e,Z)}}),[2,null]})})}self.addEventListener("install",function(e){e.waitUntil(Y.skipWaiting())}),self.addEventListener("activate",function(e){e.waitUntil(Promise.all([te(),ne()]),Y.clients.claim())})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2lkYi9idWlsZC9lc20vY2h1bmsuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2lkYi9idWlsZC9lc20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2lkYi9idWlsZC9lc20vYXN5bmMtaXRlcmF0b3JzLmpzIiwid2VicGFjazovLy8uL3NyYy9hbmd1bGFyL3NlcnZpY2Utd29ya2VyL2NvbnN0YW50cy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYW5ndWxhci9zZXJ2aWNlLXdvcmtlci9jb25zdGFudHMvZXZlbnRzLXR5cGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FuZ3VsYXIvc2VydmljZS13b3JrZXIvdXRpbHMvY3J5cHRvLnRzIiwid2VicGFjazovLy8uL3NyYy9hbmd1bGFyL3NlcnZpY2Utd29ya2VyL2V2ZW50cy9jcmVhdGVBY2NvdW50LnRzIiwid2VicGFjazovLy8uL3NyYy9hbmd1bGFyL3NlcnZpY2Utd29ya2VyL3NlcnZpY2Utd29ya2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9hbmd1bGFyL3NlcnZpY2Utd29ya2VyL2V2ZW50cy9pc0xvZ2dlZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYW5ndWxhci9zZXJ2aWNlLXdvcmtlci9ldmVudHMvaXNBY2NvdW50Q3JlYXRlZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYW5ndWxhci9zZXJ2aWNlLXdvcmtlci9ldmVudHMvY2hlY2tMb2dpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYW5ndWxhci9zZXJ2aWNlLXdvcmtlci9ldmVudHMvY2hlY2tQYXNzd29yZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYW5ndWxhci9zZXJ2aWNlLXdvcmtlci9ldmVudHMvbG9naW4udHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJpbnN0YW5jZU9mQW55IiwiY29uc3RydWN0b3JzIiwic29tZSIsImlkYlByb3h5YWJsZVR5cGVzIiwiY3Vyc29yQWR2YW5jZU1ldGhvZHMiLCJjdXJzb3JSZXF1ZXN0TWFwIiwiV2Vha01hcCIsInRyYW5zYWN0aW9uRG9uZU1hcCIsInRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcCIsInRyYW5zZm9ybUNhY2hlIiwicmV2ZXJzZVRyYW5zZm9ybUNhY2hlIiwiaWRiUHJveHlUcmFwcyIsIltvYmplY3QgT2JqZWN0XSIsInRhcmdldCIsInByb3AiLCJyZWNlaXZlciIsIklEQlRyYW5zYWN0aW9uIiwib2JqZWN0U3RvcmVOYW1lcyIsInVuZGVmaW5lZCIsIm9iamVjdFN0b3JlIiwid3JhcCIsImhhcyIsImFkZFRyYXBzIiwiY2FsbGJhY2siLCJ3cmFwRnVuY3Rpb24iLCJmdW5jIiwiSURCRGF0YWJhc2UiLCJ0cmFuc2FjdGlvbiIsIklEQkN1cnNvciIsImFkdmFuY2UiLCJjb250aW51ZSIsImNvbnRpbnVlUHJpbWFyeUtleSIsImluY2x1ZGVzIiwiYXJncyIsImFwcGx5IiwidW53cmFwIiwidGhpcyIsInN0b3JlTmFtZXMiLCJ0eCIsInNldCIsInNvcnQiLCJ0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlIiwiZG9uZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwidW5saXN0ZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY29tcGxldGUiLCJlcnJvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24iLCJJREJPYmplY3RTdG9yZSIsIklEQkluZGV4IiwiUHJveHkiLCJJREJSZXF1ZXN0IiwicmVxdWVzdCIsInByb21pc2UiLCJzdWNjZXNzIiwicmVzdWx0IiwidGhlbiIsInByb21pc2lmeVJlcXVlc3QiLCJuZXdWYWx1ZSIsIm9wZW5EQiIsInZlcnNpb24iLCJibG9ja2VkIiwidXBncmFkZSIsImJsb2NraW5nIiwiaW5kZXhlZERCIiwib3BlbiIsIm9wZW5Qcm9taXNlIiwiZXZlbnQiLCJvbGRWZXJzaW9uIiwibmV3VmVyc2lvbiIsImRiIiwicmVhZE1ldGhvZHMiLCJ3cml0ZU1ldGhvZHMiLCJjYWNoZWRNZXRob2RzIiwiTWFwIiwiZ2V0TWV0aG9kIiwidGFyZ2V0RnVuY05hbWUiLCJyZXBsYWNlIiwidXNlSW5kZXgiLCJpc1dyaXRlIiwibWV0aG9kIiwiYXN5bmMiLCJzdG9yZU5hbWUiLCJzdG9yZSIsImluZGV4Iiwic2hpZnQiLCJyZXR1cm5WYWwiLCJvbGRUcmFwcyIsImFkdmFuY2VNZXRob2RQcm9wcyIsIm1ldGhvZE1hcCIsImFkdmFuY2VSZXN1bHRzIiwiaXR0clByb3hpZWRDdXJzb3JUb09yaWdpbmFsUHJveHkiLCJjdXJzb3JJdGVyYXRvclRyYXBzIiwiY2FjaGVkRnVuYyIsIml0ZXJhdGUiLCJjdXJzb3IiLCJvcGVuQ3Vyc29yIiwicHJveGllZEN1cnNvciIsImRlbGV0ZSIsImlzSXRlcmF0b3JQcm9wIiwiYXN5bmNJdGVyYXRvciIsImlzTG9nZ2VkREJLZXlzIiwiU2VyaXZlV29ya2VyRXZlbnRzIiwiQ0hBTk5FTF9OQU1FIiwiTE9HSU5fU1RPUkVfTkFNRSIsIklTX0xPR0dFRF9TVE9SRV9OQU1FIiwiTE9HSU5fREJfU0VUVElOR1MiLCJjcnlwdG9fY3J5cHRvIiwic2VsZiIsInJlcXVpcmUiLCJnZW5lcmF0ZUhhc2giLCJjcmVhdGVIYXNoIiwidXBkYXRlIiwiZGlnZXN0IiwiY3JlYXRlQWNjb3VudCIsImNoYW5uZWwiLCJhY2NvdW50Iiwic2FsdCIsInJhbmRvbUJ5dGVzIiwidG9TdHJpbmciLCJwYXNzd29yZEhhc2giLCJwYXNzd29yZCIsImRhdGUiLCJEYXRlIiwibm93IiwibmV3QWNjb3VudCIsImxvZ2luIiwiY3JlYXRpb25UaW1lIiwibGFzdFVwZGF0ZVRpbWUiLCJwdXQiLCJfYSIsInNlbnQiLCJwb3N0TWVzc2FnZSIsInR5cGUiLCJkYXRhIiwic2VydmljZV93b3JrZXJfd29ya2VyIiwibG9naW5EYiIsInNlcnZpY2Vfd29ya2VyX3VwZ3JhZGVEQiIsInVwZ3JhZGVEQiIsImNyZWF0ZU9iamVjdFN0b3JlIiwiaXNMb2dnZWQiLCJjcmVhdGVEQiIsImNyZWF0ZUNoYW5uZWwiLCJCcm9hZGNhc3RDaGFubmVsIiwiX2IiLCJfaXNMb2dnZWQiLCJpc0FjY291bnRDcmVhdGVkIiwiY291bnQiLCJfaXNBY2NvdW50Q3JlYXRlZCIsIkJvb2xlYW4iLCJjaGVja0xvZ2luIiwiX2lzTG9naW5WYWxpZCIsImNoZWNrUGFzc3dvcmQiLCJfaXNQYXNzd29yZFZhbGlkIiwibG9naW5fbG9naW4iLCJ3YWl0VW50aWwiLCJza2lwV2FpdGluZyIsImFsbCIsImNsaWVudHMiLCJjbGFpbSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVB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QUFRVSxNQUVqRFgsRUFBUWlCLFlBQVksQ0FBRUMsS0FBTS9CLEVBQW1CZ0QsV0FBWWhCLEtBQU1pQixhSGtDckJELENBQVduQyxFQUFTcUIsRUFBU0YsR0FBTyxNQUN4RSxLQUFLaEMsRUFBbUJrRCxlSXRDN0IsU0FBNkJyQyxFQUEyQjdDLEVBQUltRCw4RkFDdEMsU0FBTW5ELEVBQUc3RixJQUFJK0gsRUFBa0JILEVBQWVlLHdCQUFqRUEsRUFBbUJjLEVBQUFDLE9BQ25CWCxFQUF1QlYsRUFBYVcsRUFBV0wsRUFBUUMsTUFDdkRvQyxFQUE0QmpDLElBQWlCSixFQUFRSyxTQUUzRE4sRUFBUWlCLFlBQVksQ0FBRUMsS0FBTS9CLEVBQW1Ca0QsY0FBZWxCLEtBQU1tQixhSmlDckJELENBQWNyQyxFQUFTcUIsRUFBU0YsR0FBTyxNQUM5RSxLQUFLaEMsRUFBbUJZLGNBQWVBLEVBQWNDLEVBQVNxQixFQUFTRixHQUFPLE1BQzlFLEtBQUtoQyxFQUFtQndCLE9LMUM3QixTQUFxQlgsRUFBMkI3QyxvRkFDbkQsU0FBTUEsRUFBRzJELElBQUl4QixHQUFzQixFQUFNSixFQUFldUMseUJBQXhEVixFQUFBQyxPQUVBaEIsRUFBUWlCLFlBQVksQ0FBRUMsS0FBTS9CLEVBQW1Cd0IsTUFBT1EsTUFBTSxhTHVDckJvQixDQUFNdkMsRUFBU3FCLE1BSXRELEdBQU8sVUFHWDVCLEtBQUs5RCxpQkFBaUIsVUFBVyxTQUFTcUIsR0FDdENBLEVBQU13RixVQUFVcEIsRUFBT3FCLGlCQUczQmhELEtBQUs5RCxpQkFBaUIsV0FBWSxTQUFTcUIsR0FDdkNBLEVBQU13RixVQUFVcEgsUUFBUXNILElBQUksQ0FDeEJoQixLQUNBQyxPQUVKUCxFQUFPdUIsUUFBUUMiLCJmaWxlIjoic2VydmljZS13b3JrZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJjb25zdCBpbnN0YW5jZU9mQW55ID0gKG9iamVjdCwgY29uc3RydWN0b3JzKSA9PiBjb25zdHJ1Y3RvcnMuc29tZShjID0+IG9iamVjdCBpbnN0YW5jZW9mIGMpO1xuXG5sZXQgaWRiUHJveHlhYmxlVHlwZXM7XHJcbmxldCBjdXJzb3JBZHZhbmNlTWV0aG9kcztcclxuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXHJcbmZ1bmN0aW9uIGdldElkYlByb3h5YWJsZVR5cGVzKCkge1xyXG4gICAgcmV0dXJuIGlkYlByb3h5YWJsZVR5cGVzIHx8XHJcbiAgICAgICAgKGlkYlByb3h5YWJsZVR5cGVzID0gW0lEQkRhdGFiYXNlLCBJREJPYmplY3RTdG9yZSwgSURCSW5kZXgsIElEQkN1cnNvciwgSURCVHJhbnNhY3Rpb25dKTtcclxufVxyXG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cclxuZnVuY3Rpb24gZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKSB7XHJcbiAgICByZXR1cm4gY3Vyc29yQWR2YW5jZU1ldGhvZHMgfHwgKGN1cnNvckFkdmFuY2VNZXRob2RzID0gW1xyXG4gICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuYWR2YW5jZSxcclxuICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlLFxyXG4gICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWVQcmltYXJ5S2V5LFxyXG4gICAgXSk7XHJcbn1cclxuY29uc3QgY3Vyc29yUmVxdWVzdE1hcCA9IG5ldyBXZWFrTWFwKCk7XHJcbmNvbnN0IHRyYW5zYWN0aW9uRG9uZU1hcCA9IG5ldyBXZWFrTWFwKCk7XHJcbmNvbnN0IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcCA9IG5ldyBXZWFrTWFwKCk7XHJcbmNvbnN0IHRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcclxuY29uc3QgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcclxuZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KSB7XHJcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcclxuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc29sdmUod3JhcChyZXF1ZXN0LnJlc3VsdCkpO1xyXG4gICAgICAgICAgICB1bmxpc3RlbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcclxuICAgICAgICAgICAgdW5saXN0ZW4oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XHJcbiAgICB9KTtcclxuICAgIHByb21pc2UudGhlbigodmFsdWUpID0+IHtcclxuICAgICAgICAvLyBTaW5jZSBjdXJzb3JpbmcgcmV1c2VzIHRoZSBJREJSZXF1ZXN0ICgqc2lnaCopLCB3ZSBjYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsXHJcbiAgICAgICAgLy8gKHNlZSB3cmFwRnVuY3Rpb24pLlxyXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQkN1cnNvcikge1xyXG4gICAgICAgICAgICBjdXJzb3JSZXF1ZXN0TWFwLnNldCh2YWx1ZSwgcmVxdWVzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBUaGlzIG1hcHBpbmcgZXhpc3RzIGluIHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBidXQgZG9lc24ndCBkb2Vzbid0IGV4aXN0IGluIHRyYW5zZm9ybUNhY2hlLiBUaGlzXHJcbiAgICAvLyBpcyBiZWNhdXNlIHdlIGNyZWF0ZSBtYW55IHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdC5cclxuICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQocHJvbWlzZSwgcmVxdWVzdCk7XHJcbiAgICByZXR1cm4gcHJvbWlzZTtcclxufVxyXG5mdW5jdGlvbiBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odHgpIHtcclxuICAgIC8vIEVhcmx5IGJhaWwgaWYgd2UndmUgYWxyZWFkeSBjcmVhdGVkIGEgZG9uZSBwcm9taXNlIGZvciB0aGlzIHRyYW5zYWN0aW9uLlxyXG4gICAgaWYgKHRyYW5zYWN0aW9uRG9uZU1hcC5oYXModHgpKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGNvbnN0IGRvbmUgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xyXG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcclxuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBjb21wbGV0ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB1bmxpc3RlbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdCh0eC5lcnJvcik7XHJcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcclxuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcclxuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcclxuICAgIH0pO1xyXG4gICAgLy8gQ2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbC5cclxuICAgIHRyYW5zYWN0aW9uRG9uZU1hcC5zZXQodHgsIGRvbmUpO1xyXG59XHJcbmxldCBpZGJQcm94eVRyYXBzID0ge1xyXG4gICAgZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcclxuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pIHtcclxuICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgdHJhbnNhY3Rpb24uZG9uZS5cclxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdkb25lJylcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbkRvbmVNYXAuZ2V0KHRhcmdldCk7XHJcbiAgICAgICAgICAgIC8vIFBvbHlmaWxsIGZvciBvYmplY3RTdG9yZU5hbWVzIGJlY2F1c2Ugb2YgRWRnZS5cclxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdvYmplY3RTdG9yZU5hbWVzJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5vYmplY3RTdG9yZU5hbWVzIHx8IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5nZXQodGFyZ2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBNYWtlIHR4LnN0b3JlIHJldHVybiB0aGUgb25seSBzdG9yZSBpbiB0aGUgdHJhbnNhY3Rpb24sIG9yIHVuZGVmaW5lZCBpZiB0aGVyZSBhcmUgbWFueS5cclxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdzdG9yZScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzFdID9cclxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQgOiByZWNlaXZlci5vYmplY3RTdG9yZShyZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBFbHNlIHRyYW5zZm9ybSB3aGF0ZXZlciB3ZSBnZXQgYmFjay5cclxuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXRbcHJvcF0pO1xyXG4gICAgfSxcclxuICAgIGhhcyh0YXJnZXQsIHByb3ApIHtcclxuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24gJiYgKHByb3AgPT09ICdkb25lJyB8fCBwcm9wID09PSAnc3RvcmUnKSlcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgcmV0dXJuIHByb3AgaW4gdGFyZ2V0O1xyXG4gICAgfSxcclxufTtcclxuZnVuY3Rpb24gYWRkVHJhcHMoY2FsbGJhY2spIHtcclxuICAgIGlkYlByb3h5VHJhcHMgPSBjYWxsYmFjayhpZGJQcm94eVRyYXBzKTtcclxufVxyXG5mdW5jdGlvbiB3cmFwRnVuY3Rpb24oZnVuYykge1xyXG4gICAgLy8gRHVlIHRvIGV4cGVjdGVkIG9iamVjdCBlcXVhbGl0eSAod2hpY2ggaXMgZW5mb3JjZWQgYnkgdGhlIGNhY2hpbmcgaW4gYHdyYXBgKSwgd2VcclxuICAgIC8vIG9ubHkgY3JlYXRlIG9uZSBuZXcgZnVuYyBwZXIgZnVuYy5cclxuICAgIC8vIEVkZ2UgZG9lc24ndCBzdXBwb3J0IG9iamVjdFN0b3JlTmFtZXMgKGJvb28pLCBzbyB3ZSBwb2x5ZmlsbCBpdCBoZXJlLlxyXG4gICAgaWYgKGZ1bmMgPT09IElEQkRhdGFiYXNlLnByb3RvdHlwZS50cmFuc2FjdGlvbiAmJlxyXG4gICAgICAgICEoJ29iamVjdFN0b3JlTmFtZXMnIGluIElEQlRyYW5zYWN0aW9uLnByb3RvdHlwZSkpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0b3JlTmFtZXMsIC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgY29uc3QgdHggPSBmdW5jLmNhbGwodW53cmFwKHRoaXMpLCBzdG9yZU5hbWVzLCAuLi5hcmdzKTtcclxuICAgICAgICAgICAgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLnNldCh0eCwgc3RvcmVOYW1lcy5zb3J0ID8gc3RvcmVOYW1lcy5zb3J0KCkgOiBbc3RvcmVOYW1lc10pO1xyXG4gICAgICAgICAgICByZXR1cm4gd3JhcCh0eCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8vIEN1cnNvciBtZXRob2RzIGFyZSBzcGVjaWFsLCBhcyB0aGUgYmVoYXZpb3VyIGlzIGEgbGl0dGxlIG1vcmUgZGlmZmVyZW50IHRvIHN0YW5kYXJkIElEQi4gSW5cclxuICAgIC8vIElEQiwgeW91IGFkdmFuY2UgdGhlIGN1cnNvciBhbmQgd2FpdCBmb3IgYSBuZXcgJ3N1Y2Nlc3MnIG9uIHRoZSBJREJSZXF1ZXN0IHRoYXQgZ2F2ZSB5b3UgdGhlXHJcbiAgICAvLyBjdXJzb3IuIEl0J3Mga2luZGEgbGlrZSBhIHByb21pc2UgdGhhdCBjYW4gcmVzb2x2ZSB3aXRoIG1hbnkgdmFsdWVzLiBUaGF0IGRvZXNuJ3QgbWFrZSBzZW5zZVxyXG4gICAgLy8gd2l0aCByZWFsIHByb21pc2VzLCBzbyBlYWNoIGFkdmFuY2UgbWV0aG9kcyByZXR1cm5zIGEgbmV3IHByb21pc2UgZm9yIHRoZSBjdXJzb3Igb2JqZWN0LCBvclxyXG4gICAgLy8gdW5kZWZpbmVkIGlmIHRoZSBlbmQgb2YgdGhlIGN1cnNvciBoYXMgYmVlbiByZWFjaGVkLlxyXG4gICAgaWYgKGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkuaW5jbHVkZXMoZnVuYykpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxyXG4gICAgICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxyXG4gICAgICAgICAgICBmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncyk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cmFwKGN1cnNvclJlcXVlc3RNYXAuZ2V0KHRoaXMpKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcbiAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxyXG4gICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXHJcbiAgICAgICAgcmV0dXJuIHdyYXAoZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpKTtcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICByZXR1cm4gd3JhcEZ1bmN0aW9uKHZhbHVlKTtcclxuICAgIC8vIFRoaXMgZG9lc24ndCByZXR1cm4sIGl0IGp1c3QgY3JlYXRlcyBhICdkb25lJyBwcm9taXNlIGZvciB0aGUgdHJhbnNhY3Rpb24sXHJcbiAgICAvLyB3aGljaCBpcyBsYXRlciByZXR1cm5lZCBmb3IgdHJhbnNhY3Rpb24uZG9uZSAoc2VlIGlkYk9iamVjdEhhbmRsZXIpLlxyXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pXHJcbiAgICAgICAgY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHZhbHVlKTtcclxuICAgIGlmIChpbnN0YW5jZU9mQW55KHZhbHVlLCBnZXRJZGJQcm94eWFibGVUeXBlcygpKSlcclxuICAgICAgICByZXR1cm4gbmV3IFByb3h5KHZhbHVlLCBpZGJQcm94eVRyYXBzKTtcclxuICAgIC8vIFJldHVybiB0aGUgc2FtZSB2YWx1ZSBiYWNrIGlmIHdlJ3JlIG5vdCBnb2luZyB0byB0cmFuc2Zvcm0gaXQuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuZnVuY3Rpb24gd3JhcCh2YWx1ZSkge1xyXG4gICAgLy8gV2Ugc29tZXRpbWVzIGdlbmVyYXRlIG11bHRpcGxlIHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdCAoZWcgd2hlbiBjdXJzb3JpbmcpLCBiZWNhdXNlXHJcbiAgICAvLyBJREIgaXMgd2VpcmQgYW5kIGEgc2luZ2xlIElEQlJlcXVlc3QgY2FuIHlpZWxkIG1hbnkgcmVzcG9uc2VzLCBzbyB0aGVzZSBjYW4ndCBiZSBjYWNoZWQuXHJcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJSZXF1ZXN0KVxyXG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KHZhbHVlKTtcclxuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgdHJhbnNmb3JtZWQgdGhpcyB2YWx1ZSBiZWZvcmUsIHJldXNlIHRoZSB0cmFuc2Zvcm1lZCB2YWx1ZS5cclxuICAgIC8vIFRoaXMgaXMgZmFzdGVyLCBidXQgaXQgYWxzbyBwcm92aWRlcyBvYmplY3QgZXF1YWxpdHkuXHJcbiAgICBpZiAodHJhbnNmb3JtQ2FjaGUuaGFzKHZhbHVlKSlcclxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcclxuICAgIGNvbnN0IG5ld1ZhbHVlID0gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSk7XHJcbiAgICAvLyBOb3QgYWxsIHR5cGVzIGFyZSB0cmFuc2Zvcm1lZC5cclxuICAgIC8vIFRoZXNlIG1heSBiZSBwcmltaXRpdmUgdHlwZXMsIHNvIHRoZXkgY2FuJ3QgYmUgV2Vha01hcCBrZXlzLlxyXG4gICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZSkge1xyXG4gICAgICAgIHRyYW5zZm9ybUNhY2hlLnNldCh2YWx1ZSwgbmV3VmFsdWUpO1xyXG4gICAgICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQobmV3VmFsdWUsIHZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXdWYWx1ZTtcclxufVxyXG5jb25zdCB1bndyYXAgPSAodmFsdWUpID0+IHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuXG5leHBvcnQgeyB3cmFwIGFzIGEsIGFkZFRyYXBzIGFzIGIsIGluc3RhbmNlT2ZBbnkgYXMgYywgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGFzIGQsIHVud3JhcCBhcyBlIH07XG4iLCJpbXBvcnQgeyBhIGFzIHdyYXAsIGIgYXMgYWRkVHJhcHMgfSBmcm9tICcuL2NodW5rLmpzJztcbmV4cG9ydCB7IGUgYXMgdW53cmFwLCBhIGFzIHdyYXAgfSBmcm9tICcuL2NodW5rLmpzJztcblxuLyoqXHJcbiAqIE9wZW4gYSBkYXRhYmFzZS5cclxuICpcclxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXHJcbiAqIEBwYXJhbSB2ZXJzaW9uIFNjaGVtYSB2ZXJzaW9uLlxyXG4gKiBAcGFyYW0gY2FsbGJhY2tzIEFkZGl0aW9uYWwgY2FsbGJhY2tzLlxyXG4gKi9cclxuZnVuY3Rpb24gb3BlbkRCKG5hbWUsIHZlcnNpb24sIHsgYmxvY2tlZCwgdXBncmFkZSwgYmxvY2tpbmcgfSA9IHt9KSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4obmFtZSwgdmVyc2lvbik7XHJcbiAgICBjb25zdCBvcGVuUHJvbWlzZSA9IHdyYXAocmVxdWVzdCk7XHJcbiAgICBpZiAodXBncmFkZSkge1xyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB1cGdyYWRlKHdyYXAocmVxdWVzdC5yZXN1bHQpLCBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCB3cmFwKHJlcXVlc3QudHJhbnNhY3Rpb24pKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChibG9ja2VkKVxyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsICgpID0+IGJsb2NrZWQoKSk7XHJcbiAgICBpZiAoYmxvY2tpbmcpXHJcbiAgICAgICAgb3BlblByb21pc2UudGhlbihkYiA9PiBkYi5hZGRFdmVudExpc3RlbmVyKCd2ZXJzaW9uY2hhbmdlJywgYmxvY2tpbmcpKTtcclxuICAgIHJldHVybiBvcGVuUHJvbWlzZTtcclxufVxyXG4vKipcclxuICogRGVsZXRlIGEgZGF0YWJhc2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVsZXRlREIobmFtZSwgeyBibG9ja2VkIH0gPSB7fSkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShuYW1lKTtcclxuICAgIGlmIChibG9ja2VkKVxyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsICgpID0+IGJsb2NrZWQoKSk7XHJcbiAgICByZXR1cm4gd3JhcChyZXF1ZXN0KS50aGVuKCgpID0+IHVuZGVmaW5lZCk7XHJcbn1cblxuY29uc3QgcmVhZE1ldGhvZHMgPSBbJ2dldCcsICdnZXRLZXknLCAnZ2V0QWxsJywgJ2dldEFsbEtleXMnLCAnY291bnQnXTtcclxuY29uc3Qgd3JpdGVNZXRob2RzID0gWydwdXQnLCAnYWRkJywgJ2RlbGV0ZScsICdjbGVhciddO1xyXG5jb25zdCBjYWNoZWRNZXRob2RzID0gbmV3IE1hcCgpO1xyXG5mdW5jdGlvbiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB7XHJcbiAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBJREJEYXRhYmFzZSAmJlxyXG4gICAgICAgICEocHJvcCBpbiB0YXJnZXQpICYmXHJcbiAgICAgICAgdHlwZW9mIHByb3AgPT09ICdzdHJpbmcnKSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICBpZiAoY2FjaGVkTWV0aG9kcy5nZXQocHJvcCkpXHJcbiAgICAgICAgcmV0dXJuIGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApO1xyXG4gICAgY29uc3QgdGFyZ2V0RnVuY05hbWUgPSBwcm9wLnJlcGxhY2UoL0Zyb21JbmRleCQvLCAnJyk7XHJcbiAgICBjb25zdCB1c2VJbmRleCA9IHByb3AgIT09IHRhcmdldEZ1bmNOYW1lO1xyXG4gICAgY29uc3QgaXNXcml0ZSA9IHdyaXRlTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSk7XHJcbiAgICBpZiAoXHJcbiAgICAvLyBCYWlsIGlmIHRoZSB0YXJnZXQgZG9lc24ndCBleGlzdCBvbiB0aGUgdGFyZ2V0LiBFZywgZ2V0QWxsIGlzbid0IGluIEVkZ2UuXHJcbiAgICAhKHRhcmdldEZ1bmNOYW1lIGluICh1c2VJbmRleCA/IElEQkluZGV4IDogSURCT2JqZWN0U3RvcmUpLnByb3RvdHlwZSkgfHxcclxuICAgICAgICAhKGlzV3JpdGUgfHwgcmVhZE1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpKSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICBjb25zdCBtZXRob2QgPSBhc3luYyBmdW5jdGlvbiAoc3RvcmVOYW1lLCAuLi5hcmdzKSB7XHJcbiAgICAgICAgY29uc3QgdHggPSB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5Jyk7XHJcbiAgICAgICAgbGV0IHRhcmdldCA9IHR4LnN0b3JlO1xyXG4gICAgICAgIGlmICh1c2VJbmRleClcclxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmluZGV4KGFyZ3Muc2hpZnQoKSk7XHJcbiAgICAgICAgY29uc3QgcmV0dXJuVmFsID0gdGFyZ2V0W3RhcmdldEZ1bmNOYW1lXSguLi5hcmdzKTtcclxuICAgICAgICBpZiAoaXNXcml0ZSlcclxuICAgICAgICAgICAgYXdhaXQgdHguZG9uZTtcclxuICAgICAgICByZXR1cm4gcmV0dXJuVmFsO1xyXG4gICAgfTtcclxuICAgIGNhY2hlZE1ldGhvZHMuc2V0KHByb3AsIG1ldGhvZCk7XHJcbiAgICByZXR1cm4gbWV0aG9kO1xyXG59XHJcbmFkZFRyYXBzKG9sZFRyYXBzID0+ICh7XHJcbiAgICBnZXQ6ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSA9PiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlciksXHJcbiAgICBoYXM6ICh0YXJnZXQsIHByb3ApID0+ICEhZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuaGFzKHRhcmdldCwgcHJvcCksXHJcbn0pKTtcblxuZXhwb3J0IHsgb3BlbkRCLCBkZWxldGVEQiB9O1xuIiwiaW1wb3J0IHsgYiBhcyBhZGRUcmFwcywgYyBhcyBpbnN0YW5jZU9mQW55LCBkIGFzIHJldmVyc2VUcmFuc2Zvcm1DYWNoZSwgZSBhcyB1bndyYXAgfSBmcm9tICcuL2NodW5rLmpzJztcblxuY29uc3QgYWR2YW5jZU1ldGhvZFByb3BzID0gWydjb250aW51ZScsICdjb250aW51ZVByaW1hcnlLZXknLCAnYWR2YW5jZSddO1xyXG5jb25zdCBtZXRob2RNYXAgPSB7fTtcclxuY29uc3QgYWR2YW5jZVJlc3VsdHMgPSBuZXcgV2Vha01hcCgpO1xyXG5jb25zdCBpdHRyUHJveGllZEN1cnNvclRvT3JpZ2luYWxQcm94eSA9IG5ldyBXZWFrTWFwKCk7XHJcbmNvbnN0IGN1cnNvckl0ZXJhdG9yVHJhcHMgPSB7XHJcbiAgICBnZXQodGFyZ2V0LCBwcm9wKSB7XHJcbiAgICAgICAgaWYgKCFhZHZhbmNlTWV0aG9kUHJvcHMuaW5jbHVkZXMocHJvcCkpXHJcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRbcHJvcF07XHJcbiAgICAgICAgbGV0IGNhY2hlZEZ1bmMgPSBtZXRob2RNYXBbcHJvcF07XHJcbiAgICAgICAgaWYgKCFjYWNoZWRGdW5jKSB7XHJcbiAgICAgICAgICAgIGNhY2hlZEZ1bmMgPSBtZXRob2RNYXBbcHJvcF0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xyXG4gICAgICAgICAgICAgICAgYWR2YW5jZVJlc3VsdHMuc2V0KHRoaXMsIGl0dHJQcm94aWVkQ3Vyc29yVG9PcmlnaW5hbFByb3h5LmdldCh0aGlzKVtwcm9wXSguLi5hcmdzKSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjYWNoZWRGdW5jO1xyXG4gICAgfSxcclxufTtcclxuYXN5bmMgZnVuY3Rpb24qIGl0ZXJhdGUoLi4uYXJncykge1xyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXRoaXMtYXNzaWdubWVudFxyXG4gICAgbGV0IGN1cnNvciA9IHRoaXM7XHJcbiAgICBpZiAoIShjdXJzb3IgaW5zdGFuY2VvZiBJREJDdXJzb3IpKSB7XHJcbiAgICAgICAgY3Vyc29yID0gYXdhaXQgY3Vyc29yLm9wZW5DdXJzb3IoLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWN1cnNvcilcclxuICAgICAgICByZXR1cm47XHJcbiAgICBjdXJzb3IgPSBjdXJzb3I7XHJcbiAgICBjb25zdCBwcm94aWVkQ3Vyc29yID0gbmV3IFByb3h5KGN1cnNvciwgY3Vyc29ySXRlcmF0b3JUcmFwcyk7XHJcbiAgICBpdHRyUHJveGllZEN1cnNvclRvT3JpZ2luYWxQcm94eS5zZXQocHJveGllZEN1cnNvciwgY3Vyc29yKTtcclxuICAgIC8vIE1hcCB0aGlzIGRvdWJsZS1wcm94eSBiYWNrIHRvIHRoZSBvcmlnaW5hbCwgc28gb3RoZXIgY3Vyc29yIG1ldGhvZHMgd29yay5cclxuICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQocHJveGllZEN1cnNvciwgdW53cmFwKGN1cnNvcikpO1xyXG4gICAgd2hpbGUgKGN1cnNvcikge1xyXG4gICAgICAgIHlpZWxkIHByb3hpZWRDdXJzb3I7XHJcbiAgICAgICAgLy8gSWYgb25lIG9mIHRoZSBhZHZhbmNpbmcgbWV0aG9kcyB3YXMgbm90IGNhbGxlZCwgY2FsbCBjb250aW51ZSgpLlxyXG4gICAgICAgIGN1cnNvciA9IGF3YWl0IChhZHZhbmNlUmVzdWx0cy5nZXQocHJveGllZEN1cnNvcikgfHwgY3Vyc29yLmNvbnRpbnVlKCkpO1xyXG4gICAgICAgIGFkdmFuY2VSZXN1bHRzLmRlbGV0ZShwcm94aWVkQ3Vyc29yKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0l0ZXJhdG9yUHJvcCh0YXJnZXQsIHByb3ApIHtcclxuICAgIHJldHVybiAocHJvcCA9PT0gU3ltYm9sLmFzeW5jSXRlcmF0b3IgJiZcclxuICAgICAgICBpbnN0YW5jZU9mQW55KHRhcmdldCwgW0lEQkluZGV4LCBJREJPYmplY3RTdG9yZSwgSURCQ3Vyc29yXSkpIHx8IChwcm9wID09PSAnaXRlcmF0ZScgJiZcclxuICAgICAgICBpbnN0YW5jZU9mQW55KHRhcmdldCwgW0lEQkluZGV4LCBJREJPYmplY3RTdG9yZV0pKTtcclxufVxyXG5hZGRUcmFwcyhvbGRUcmFwcyA9PiAoe1xyXG4gICAgZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcclxuICAgICAgICBpZiAoaXNJdGVyYXRvclByb3AodGFyZ2V0LCBwcm9wKSlcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZXJhdGU7XHJcbiAgICAgICAgcmV0dXJuIG9sZFRyYXBzLmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTtcclxuICAgIH0sXHJcbiAgICBoYXModGFyZ2V0LCBwcm9wKSB7XHJcbiAgICAgICAgcmV0dXJuIGlzSXRlcmF0b3JQcm9wKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuaGFzKHRhcmdldCwgcHJvcCk7XHJcbiAgICB9LFxyXG59KSk7XG4iLCJpbXBvcnQgeyBEQlNldHRpbmdzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XHJcblxyXG5leHBvcnQgY29uc3QgQ0hBTk5FTF9OQU1FOiBzdHJpbmcgPSAnc3ctbWVzc2FnZXMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IExPR0lOX1NUT1JFX05BTUU6ICdsb2dpbi1zdG9yZScgPSAnbG9naW4tc3RvcmUnO1xyXG5leHBvcnQgY29uc3QgSVNfTE9HR0VEX1NUT1JFX05BTUU6ICdsb2dnZWQtc3RvcmUnID0gJ2xvZ2dlZC1zdG9yZSc7XHJcblxyXG5leHBvcnQgY29uc3QgTE9HSU5fREJfU0VUVElOR1M6IERCU2V0dGluZ3MgPSB7XHJcbiAgICBuYW1lOiAnbG9naW4nLFxyXG4gICAgdmVyc2lvbjogNCxcclxufVxyXG5cclxuXHJcbmV4cG9ydCBlbnVtIGlzTG9nZ2VkREJLZXlzIHtcclxuICAgIGlzTG9nZ2VkID0gJ2lzTG9nZ2VkJyxcclxuICAgIGFjY291bnQgPSAnYWNjb3VudCcsXHJcbn1cclxuIiwiZXhwb3J0IGVudW0gU2VyaXZlV29ya2VyRXZlbnRzIHtcclxuICAgIGlzTG9nZ2VkID0gJ2lzTG9nZ2VkJyxcclxuICAgIGlzQWNjb3VudENyZWF0ZWQgPSAnaXNBY2NvdW50Q3JlYXRlZCcsXHJcbiAgICBjaGVja0xvZ2luID0gJ2NoZWNrTG9naW4nLFxyXG4gICAgY2hlY2tQYXNzd29yZCA9ICdjaGVja1Bhc3N3b3JkJyxcclxuICAgIGNyZWF0ZUFjY291bnQgPSAnY3JlYXRlQWNjb3VudCcsXHJcbiAgICBsb2dpbiA9ICdsb2dpbicsXHJcbn1cclxuIiwiY29uc3Qgd29ya2VyOiBhbnkgPSBzZWxmO1xyXG5jb25zdCBjcnlwdG8gPSB3b3JrZXIucmVxdWlyZSgnY3J5cHRvJyk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTYWx0KCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKDE2KS50b1N0cmluZygnaGV4Jyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUhhc2goczogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKHMpLmRpZ2VzdCgnaGV4Jyk7XHJcbn1cclxuIiwiaW1wb3J0IHsgTE9HSU5fU1RPUkVfTkFNRSwgaXNMb2dnZWREQktleXMgfSBmcm9tICcuLi9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBBY2NvdW50IH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IEFjY291bnQgYXMgQXV0aEFjY291bnQgfSBmcm9tICdzcmMvYW5ndWxhci9hcHAvbW9kdWxlcy9hdXRob3JpemF0aW9uL2ludGVmcmFjZXMnO1xyXG5pbXBvcnQgeyBTZXJpdmVXb3JrZXJFdmVudHMgfSBmcm9tICcuLi9jb25zdGFudHMvZXZlbnRzLXR5cGUnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZVNhbHQsIGdlbmVyYXRlSGFzaCB9IGZyb20gJy4uL3V0aWxzL2NyeXB0byc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQWNjb3VudChjaGFubmVsOiBCcm9hZGNhc3RDaGFubmVsLCBkYiwgYWNjb3VudDogQXV0aEFjY291bnQpIHtcclxuICAgIGNvbnN0IHNhbHQ6IHN0cmluZyA9IGdlbmVyYXRlU2FsdCgpO1xyXG4gICAgY29uc3QgcGFzc3dvcmRIYXNoOiBzdHJpbmcgPSBnZW5lcmF0ZUhhc2goYWNjb3VudC5wYXNzd29yZCArIHNhbHQpO1xyXG4gICAgY29uc3QgZGF0ZTogbnVtYmVyID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICBjb25zdCBuZXdBY2NvdW50OiBBY2NvdW50ID0ge1xyXG4gICAgICAgIHNhbHQsXHJcbiAgICAgICAgbG9naW46IGFjY291bnQubG9naW4sXHJcbiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkSGFzaCxcclxuICAgICAgICBjcmVhdGlvblRpbWU6IGRhdGUsXHJcbiAgICAgICAgbGFzdFVwZGF0ZVRpbWU6IGRhdGUsXHJcbiAgICB9O1xyXG5cclxuICAgIGF3YWl0IGRiLnB1dChMT0dJTl9TVE9SRV9OQU1FLCBuZXdBY2NvdW50LCBpc0xvZ2dlZERCS2V5cy5hY2NvdW50KTtcclxuXHJcbiAgICBjaGFubmVsLnBvc3RNZXNzYWdlKHsgdHlwZTogU2VyaXZlV29ya2VyRXZlbnRzLmNyZWF0ZUFjY291bnQsIGRhdGE6IHRydWUgfSk7XHJcbn1cclxuIiwiaW1wb3J0IHsgb3BlbkRCIH0gZnJvbSAnaWRiL3dpdGgtYXN5bmMtaXR0ci5qcyc7XHJcblxyXG5pbXBvcnQgeyBcclxuICAgIENIQU5ORUxfTkFNRSxcclxuICAgIExPR0lOX1NUT1JFX05BTUUsXHJcbiAgICBJU19MT0dHRURfU1RPUkVfTkFNRSxcclxuICAgIExPR0lOX0RCX1NFVFRJTkdTLFxyXG4gICAgaXNMb2dnZWREQktleXMsXHJcbn0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBTZXJpdmVXb3JrZXJFdmVudHMgfSBmcm9tICcuL2NvbnN0YW50cy9ldmVudHMtdHlwZSc7XHJcbmltcG9ydCB7IE15REIgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBpc0xvZ2dlZCwgaXNBY2NvdW50Q3JlYXRlZCwgY2hlY2tMb2dpbiwgY2hlY2tQYXNzd29yZCwgY3JlYXRlQWNjb3VudCwgbG9naW4gfSBmcm9tICcuL2V2ZW50cyc7XHJcblxyXG5jb25zdCB3b3JrZXI6IGFueSA9IHNlbGY7XHJcbmxldCBsb2dpbkRiID0gbnVsbDtcclxuXHJcbmZ1bmN0aW9uIHVwZ3JhZGVEQih1cGdyYWRlREIpOiB2b2lkIHtcclxuICAgIGNvbnN0IGFjY291bnRTdG9yZSA9IHVwZ3JhZGVEQi5jcmVhdGVPYmplY3RTdG9yZShMT0dJTl9TVE9SRV9OQU1FKTtcclxuICAgIGNvbnN0IHN0b3JlID0gdXBncmFkZURCLmNyZWF0ZU9iamVjdFN0b3JlKElTX0xPR0dFRF9TVE9SRV9OQU1FKTtcclxuXHJcbiAgICBzdG9yZS5wdXQoZmFsc2UsIGlzTG9nZ2VkREJLZXlzLmlzTG9nZ2VkKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlREIoKSB7XHJcbiAgICBsb2dpbkRiID0gYXdhaXQgb3BlbkRCPE15REI+KFxyXG4gICAgICAgIExPR0lOX0RCX1NFVFRJTkdTLm5hbWUsXHJcbiAgICAgICAgTE9HSU5fREJfU0VUVElOR1MudmVyc2lvbixcclxuICAgICAgICB7IHVwZ3JhZGU6IHVwZ3JhZGVEQiB9XHJcbiAgICApO1xyXG5cclxuICAgIGF3YWl0IGxvZ2luRGIucHV0KElTX0xPR0dFRF9TVE9SRV9OQU1FLCBmYWxzZSwgaXNMb2dnZWREQktleXMuaXNMb2dnZWQpO1xyXG5cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVDaGFubmVsKCkge1xyXG4gICAgY29uc3QgY2hhbm5lbDogQnJvYWRjYXN0Q2hhbm5lbCA9IG5ldyBCcm9hZGNhc3RDaGFubmVsKENIQU5ORUxfTkFNRSk7XHJcblxyXG4gICAgY2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKHsgZGF0YTogeyB0eXBlLCBkYXRhIH0gfSkgPT4ge1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFNlcml2ZVdvcmtlckV2ZW50cy5pc0xvZ2dlZDogaXNMb2dnZWQoY2hhbm5lbCwgbG9naW5EYik7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFNlcml2ZVdvcmtlckV2ZW50cy5pc0FjY291bnRDcmVhdGVkOiBpc0FjY291bnRDcmVhdGVkKGNoYW5uZWwsIGxvZ2luRGIpOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTZXJpdmVXb3JrZXJFdmVudHMuY2hlY2tMb2dpbjogY2hlY2tMb2dpbihjaGFubmVsLCBsb2dpbkRiLCBkYXRhKTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgU2VyaXZlV29ya2VyRXZlbnRzLmNoZWNrUGFzc3dvcmQ6IGNoZWNrUGFzc3dvcmQoY2hhbm5lbCwgbG9naW5EYiwgZGF0YSk7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFNlcml2ZVdvcmtlckV2ZW50cy5jcmVhdGVBY2NvdW50OiBjcmVhdGVBY2NvdW50KGNoYW5uZWwsIGxvZ2luRGIsIGRhdGEpOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTZXJpdmVXb3JrZXJFdmVudHMubG9naW46IGxvZ2luKGNoYW5uZWwsIGxvZ2luRGIpOyBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuc2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgZnVuY3Rpb24oZXZlbnQ6IGFueSkge1xyXG4gICAgZXZlbnQud2FpdFVudGlsKHdvcmtlci5za2lwV2FpdGluZygpKTtcclxufSk7XHJcblxyXG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2FjdGl2YXRlJywgZnVuY3Rpb24oZXZlbnQ6IGFueSkge1xyXG4gICAgZXZlbnQud2FpdFVudGlsKFByb21pc2UuYWxsKFtcclxuICAgICAgICBjcmVhdGVEQigpLCBcclxuICAgICAgICBjcmVhdGVDaGFubmVsKCksXHJcbiAgICBdKSxcclxuICAgIHdvcmtlci5jbGllbnRzLmNsYWltKCksXHJcbiAgICApO1xyXG59KTtcclxuIiwiaW1wb3J0IHsgSVNfTE9HR0VEX1NUT1JFX05BTUUsIGlzTG9nZ2VkREJLZXlzIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgU2VyaXZlV29ya2VyRXZlbnRzIH0gZnJvbSAnLi4vY29uc3RhbnRzL2V2ZW50cy10eXBlJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc0xvZ2dlZChjaGFubmVsOiBCcm9hZGNhc3RDaGFubmVsLCBkYikge1xyXG4gICAgY29uc3QgX2lzTG9nZ2VkOiBib29sZWFuID0gYXdhaXQgZGIuZ2V0KElTX0xPR0dFRF9TVE9SRV9OQU1FLCBpc0xvZ2dlZERCS2V5cy5pc0xvZ2dlZCk7XHJcblxyXG4gICAgY2hhbm5lbC5wb3N0TWVzc2FnZSh7IHR5cGU6IFNlcml2ZVdvcmtlckV2ZW50cy5pc0xvZ2dlZCwgZGF0YTogX2lzTG9nZ2VkIH0pO1xyXG59XHJcbiIsImltcG9ydCB7IExPR0lOX1NUT1JFX05BTUUsIGlzTG9nZ2VkREJLZXlzIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgU2VyaXZlV29ya2VyRXZlbnRzIH0gZnJvbSAnLi4vY29uc3RhbnRzL2V2ZW50cy10eXBlJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc0FjY291bnRDcmVhdGVkKGNoYW5uZWw6IEJyb2FkY2FzdENoYW5uZWwsIGRiKSB7XHJcbiAgICBjb25zdCBjb3VudCA9IGF3YWl0IGRiLmNvdW50KExPR0lOX1NUT1JFX05BTUUsIGlzTG9nZ2VkREJLZXlzLmFjY291bnQpO1xyXG4gICAgY29uc3QgX2lzQWNjb3VudENyZWF0ZWQ6IGJvb2xlYW4gPSBCb29sZWFuKGNvdW50KTtcclxuXHJcbiAgICBjaGFubmVsLnBvc3RNZXNzYWdlKHsgdHlwZTogU2VyaXZlV29ya2VyRXZlbnRzLmlzQWNjb3VudENyZWF0ZWQsIGRhdGE6IF9pc0FjY291bnRDcmVhdGVkIH0pO1xyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBMT0dJTl9TVE9SRV9OQU1FLCBpc0xvZ2dlZERCS2V5cyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IEFjY291bnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgU2VyaXZlV29ya2VyRXZlbnRzIH0gZnJvbSAnLi4vY29uc3RhbnRzL2V2ZW50cy10eXBlJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0xvZ2luKGNoYW5uZWw6IEJyb2FkY2FzdENoYW5uZWwsIGRiLCBsb2dpbjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBhY2NvdW50OiBBY2NvdW50ID0gYXdhaXQgZGIuZ2V0KExPR0lOX1NUT1JFX05BTUUsIGlzTG9nZ2VkREJLZXlzLmFjY291bnQpO1xyXG4gICAgY29uc3QgX2lzTG9naW5WYWxpZDogYm9vbGVhbiA9IGxvZ2luID09PSBhY2NvdW50LmxvZ2luO1xyXG5cclxuICAgIGNoYW5uZWwucG9zdE1lc3NhZ2UoeyB0eXBlOiBTZXJpdmVXb3JrZXJFdmVudHMuY2hlY2tMb2dpbiwgZGF0YTogX2lzTG9naW5WYWxpZCB9KTtcclxufVxyXG4iLCJpbXBvcnQgeyBMT0dJTl9TVE9SRV9OQU1FLCBpc0xvZ2dlZERCS2V5cyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IEFjY291bnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgU2VyaXZlV29ya2VyRXZlbnRzIH0gZnJvbSAnLi4vY29uc3RhbnRzL2V2ZW50cy10eXBlJztcclxuaW1wb3J0IHsgZ2VuZXJhdGVIYXNoIH0gZnJvbSAnLi4vdXRpbHMvY3J5cHRvJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1Bhc3N3b3JkKGNoYW5uZWw6IEJyb2FkY2FzdENoYW5uZWwsIGRiLCBwYXNzd29yZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBhY2NvdW50OiBBY2NvdW50ID0gYXdhaXQgZGIuZ2V0KExPR0lOX1NUT1JFX05BTUUsIGlzTG9nZ2VkREJLZXlzLmFjY291bnQpO1xyXG4gICAgY29uc3QgcGFzc3dvcmRIYXNoOiBzdHJpbmcgPSBnZW5lcmF0ZUhhc2gocGFzc3dvcmQgKyBhY2NvdW50LnNhbHQpO1xyXG4gICAgY29uc3QgX2lzUGFzc3dvcmRWYWxpZDogYm9vbGVhbiA9IHBhc3N3b3JkSGFzaCA9PT0gYWNjb3VudC5wYXNzd29yZDtcclxuXHJcbiAgICBjaGFubmVsLnBvc3RNZXNzYWdlKHsgdHlwZTogU2VyaXZlV29ya2VyRXZlbnRzLmNoZWNrUGFzc3dvcmQsIGRhdGE6IF9pc1Bhc3N3b3JkVmFsaWQgfSk7XHJcbn1cclxuIiwiaW1wb3J0IHsgSVNfTE9HR0VEX1NUT1JFX05BTUUsIGlzTG9nZ2VkREJLZXlzIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgU2VyaXZlV29ya2VyRXZlbnRzIH0gZnJvbSAnLi4vY29uc3RhbnRzL2V2ZW50cy10eXBlJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dpbihjaGFubmVsOiBCcm9hZGNhc3RDaGFubmVsLCBkYikge1xyXG4gICAgYXdhaXQgZGIucHV0KElTX0xPR0dFRF9TVE9SRV9OQU1FLCB0cnVlLCBpc0xvZ2dlZERCS2V5cy5pc0xvZ2dlZCk7XHJcblxyXG4gICAgY2hhbm5lbC5wb3N0TWVzc2FnZSh7IHR5cGU6IFNlcml2ZVdvcmtlckV2ZW50cy5sb2dpbiwgZGF0YTogdHJ1ZSB9KTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9